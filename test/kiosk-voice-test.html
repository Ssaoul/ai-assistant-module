<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè™ ÌÇ§Ïò§Ïä§ÌÅ¨ ÏùåÏÑ± Ïù∏Ïãù ÌÖåÏä§Ìä∏</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Malgun Gothic', Arial, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* ÌÇ§Ïò§Ïä§ÌÅ¨ ÏÉÅÎã® Ìó§Îçî */
        .kiosk-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .kiosk-header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        .voice-status {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            font-size: 14px;
        }
        
        .mic-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #95a5a6;
            transition: all 0.3s ease;
        }
        
        .mic-indicator.listening {
            background: #e74c3c;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        /* Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà */
        .main-container {
            display: flex;
            flex: 1;
            gap: 20px;
            padding: 20px;
        }
        
        /* ÌÇ§Ïò§Ïä§ÌÅ¨ ÌôîÎ©¥ */
        .kiosk-screen {
            flex: 2;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
        }
        
        .screen-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .screen-header h2 {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .screen-header p {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        /* Î©îÎâ¥ Í∑∏Î¶¨Îìú */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .menu-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .menu-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border-color: #007bff;
        }
        
        .menu-item.selected {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border-color: #0056b3;
        }
        
        .menu-item .icon {
            font-size: 36px;
            margin-bottom: 8px;
            display: block;
        }
        
        .menu-item .name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .menu-item .price {
            font-size: 14px;
            color: #6c757d;
        }
        
        .menu-item.selected .price {
            color: #ffffff;
        }
        
        /* ÌïòÎã® Î≤ÑÌäºÎì§ */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: auto;
        }
        
        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .action-btn.primary {
            background: #28a745;
            color: white;
        }
        
        .action-btn.secondary {
            background: #6c757d;
            color: white;
        }
        
        .action-btn.danger {
            background: #dc3545;
            color: white;
        }
        
        .action-btn.info {
            background: #17a2b8;
            color: white;
        }
        
        .action-btn:hover {
            transform: translateY(-1px);
            filter: brightness(1.1);
        }
        
        /* Ïö∞Ï∏° Ìå®ÎÑê */
        .right-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        /* ÏÑ±Îä• Î™®ÎãàÌÑ∞ */
        .performance-monitor {
            background: rgba(255,255,255,0.95);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .performance-monitor h3 {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .performance-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .stat-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #007bff;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6c757d;
            margin-top: 2px;
        }
        
        .ai-strategy {
            background: #e3f2fd;
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            font-size: 12px;
            color: #1976d2;
            border: 1px solid #bbdefb;
        }
        
        /* Î°úÍ∑∏ ÏòÅÏó≠ */
        .log-panel {
            background: rgba(0,0,0,0.9);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .log-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .log-header h3 {
            color: #00ff00;
            font-size: 16px;
            margin: 0;
        }
        
        .log-controls {
            display: flex;
            gap: 5px;
        }
        
        .log-btn {
            padding: 4px 8px;
            font-size: 11px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background: #333;
            color: white;
        }
        
        .log-btn:hover {
            background: #555;
        }
        
        .log-content {
            background: #000;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.4;
            padding: 10px;
            border-radius: 5px;
            height: 200px;
            overflow-y: auto;
            flex: 1;
        }
        
        .log-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .log-content::-webkit-scrollbar-track {
            background: #333;
        }
        
        .log-content::-webkit-scrollbar-thumb {
            background: #666;
            border-radius: 3px;
        }
        
        .log-entry {
            margin: 2px 0;
        }
        
        .log-entry.success { color: #00ff00; }
        .log-entry.error { color: #ff6b6b; }
        .log-entry.warning { color: #ffd43b; }
        .log-entry.info { color: #74c0fc; }
        .log-entry.ai { color: #ff9500; }
        .log-entry.performance { color: #51cf66; }
        
        /* Î∞òÏùëÌòï */
        @media (max-width: 1200px) {
            .main-container {
                flex-direction: column;
            }
            
            .right-panel {
                flex-direction: row;
            }
            
            .log-content {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- ÌÇ§Ïò§Ïä§ÌÅ¨ Ìó§Îçî -->
    <div class="kiosk-header">
        <h1>üè™ ÎßõÏûàÎäî Ïπ¥Ìéò ÌÇ§Ïò§Ïä§ÌÅ¨</h1>
        <div class="voice-status">
            <div class="mic-indicator" id="micIndicator"></div>
            <span id="voiceStatusText">ÏùåÏÑ± Ïù∏Ïãù ÎåÄÍ∏∞Ï§ë...</span>
        </div>
    </div>

    <div class="main-container">
        <!-- ÌÇ§Ïò§Ïä§ÌÅ¨ Î©îÏù∏ ÌôîÎ©¥ -->
        <div class="kiosk-screen">
            <div class="screen-header">
                <h2>Î©îÎâ¥Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</h2>
                <p>ÏùåÏÑ±ÏúºÎ°ú "ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏ Ï£ºÎ¨∏", "ÎùºÎñº 2Í∞ú", "Îß•ÎÇ† Í≤ÄÏÉâ" Îì± ÏûêÏó∞Ïä§ÎüΩÍ≤å ÎßêÌï¥Î≥¥ÏÑ∏Ïöî</p>
            </div>
            
            <div class="menu-grid" id="menuGrid">
                <!-- Ïª§Ìîº Î©îÎâ¥ -->
                <div class="menu-item" data-item="ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏">
                    <span class="icon">‚òï</span>
                    <div class="name">ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏</div>
                    <div class="price">3,500Ïõê</div>
                </div>
                
                <div class="menu-item" data-item="Ïπ¥ÌéòÎùºÎñº">
                    <span class="icon">ü•õ</span>
                    <div class="name">Ïπ¥ÌéòÎùºÎñº</div>
                    <div class="price">4,000Ïõê</div>
                </div>
                
                <div class="menu-item" data-item="Ïπ¥Ìë∏ÏπòÎÖ∏">
                    <span class="icon">‚òï</span>
                    <div class="name">Ïπ¥Ìë∏ÏπòÎÖ∏</div>
                    <div class="price">4,500Ïõê</div>
                </div>
                
                <div class="menu-item" data-item="Î∞îÎãêÎùºÎùºÎñº">
                    <span class="icon">üç¶</span>
                    <div class="name">Î∞îÎãêÎùºÎùºÎñº</div>
                    <div class="price">4,800Ïõê</div>
                </div>
                
                <div class="menu-item" data-item="ÏïÑÏù¥Ïä§Ìã∞">
                    <span class="icon">üßä</span>
                    <div class="name">ÏïÑÏù¥Ïä§Ìã∞</div>
                    <div class="price">3,000Ïõê</div>
                </div>
                
                <div class="menu-item" data-item="Ìï´Ï¥àÏΩúÎ¶ø">
                    <span class="icon">üç´</span>
                    <div class="name">Ìï´Ï¥àÏΩúÎ¶ø</div>
                    <div class="price">4,200Ïõê</div>
                </div>
                
                <!-- ÎîîÏ†ÄÌä∏ -->
                <div class="menu-item" data-item="ÌÅ¨Î°úÏôÄÏÉÅ">
                    <span class="icon">ü•ê</span>
                    <div class="name">ÌÅ¨Î°úÏôÄÏÉÅ</div>
                    <div class="price">2,800Ïõê</div>
                </div>
                
                <div class="menu-item" data-item="ÏπòÏ¶àÏºÄÏù¥ÌÅ¨">
                    <span class="icon">üç∞</span>
                    <div class="name">ÏπòÏ¶àÏºÄÏù¥ÌÅ¨</div>
                    <div class="price">5,500Ïõê</div>
                </div>
                
                <div class="menu-item" data-item="ÎßàÏπ¥Î°±">
                    <span class="icon">üßÅ</span>
                    <div class="name">ÎßàÏπ¥Î°±</div>
                    <div class="price">1,800Ïõê</div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="action-btn primary" onclick="processOrder()">üõí Ï£ºÎ¨∏ÌïòÍ∏∞</button>
                <button class="action-btn secondary" onclick="clearSelection()">üóëÔ∏è Ï¥àÍ∏∞Ìôî</button>
                <button class="action-btn info" onclick="showHelp()">‚ùì ÎèÑÏõÄÎßê</button>
                <button class="action-btn danger" onclick="cancelOrder()">‚ùå Ï∑®ÏÜå</button>
            </div>
        </div>

        <!-- Ïö∞Ï∏° Ìå®ÎÑê -->
        <div class="right-panel">
            <!-- ÏÑ±Îä• Î™®ÎãàÌÑ∞ -->
            <div class="performance-monitor">
                <h3>‚ö° AI ÏÑ±Îä• Î™®ÎãàÌÑ∞</h3>
                
                <div class="performance-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="responseTime">0ms</div>
                        <div class="stat-label">ÏùëÎãµÏãúÍ∞Ñ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="confidence">0%</div>
                        <div class="stat-label">Ïù∏ÏãùÏ†ïÌôïÎèÑ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="successRate">0%</div>
                        <div class="stat-label">ÏÑ±Í≥µÎ•†</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalCommands">0</div>
                        <div class="stat-label">Ï¥ù Î™ÖÎ†πÏàò</div>
                    </div>
                </div>
                
                <div class="ai-strategy" id="aiStrategy">
                    Fast-First Fallback ÎåÄÍ∏∞Ï§ë
                </div>
            </div>
            
            <!-- Î°úÍ∑∏ Ìå®ÎÑê -->
            <div class="log-panel">
                <div class="log-header">
                    <h3>üìä Ïã§ÏãúÍ∞Ñ Î°úÍ∑∏</h3>
                    <div class="log-controls">
                        <button class="log-btn" onclick="clearLogs()">ÏßÄÏö∞Í∏∞</button>
                        <button class="log-btn" onclick="exportLogs()">Ï†ÄÏû•</button>
                    </div>
                </div>
                <div class="log-content" id="logContent"></div>
            </div>
        </div>
    </div>

    <script src="../src/standalone/ai-assistant-standalone.js"></script>
    <script>
        // Í∏ÄÎ°úÎ≤å Î≥ÄÏàò
        let assistant = null;
        let performanceStats = {
            totalCommands: 0,
            successfulCommands: 0,
            totalResponseTime: 0,
            lastConfidence: 0
        };
        let selectedItems = [];

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÏûêÎèô Ï¥àÍ∏∞Ìôî
        window.addEventListener('load', async () => {
            await initializeKioskAssistant();
            addLog('üéâ ÌÇ§Ïò§Ïä§ÌÅ¨ ÏùåÏÑ± Ïù∏Ïãù ÏãúÏä§ÌÖú ÏãúÏûë', 'success');
            addLog('üí° Î©îÎâ¥ Ïù¥Î¶ÑÏùÑ ÏûêÏó∞Ïä§ÎüΩÍ≤å ÎßêÌï¥Î≥¥ÏÑ∏Ïöî', 'info');
            
            // Î©îÎâ¥ ÏïÑÏù¥ÌÖú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Îì±Î°ù
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', () => {
                    toggleMenuItem(item.dataset.item);
                });
            });
        });

        async function initializeKioskAssistant() {
            try {
                // API ÌÇ§Î•º ÌôòÍ≤ΩÎ≥ÄÏàòÎÇò ÏÇ¨Ïö©Ïûê ÏûÖÎ†•ÏúºÎ°ú Î∞õÎèÑÎ°ù ÏàòÏ†ï
                const openaiApiKey = prompt('OpenAI API ÌÇ§Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî:');
                const hyperclovaApiKey = prompt('HyperCLOVA X API ÌÇ§Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî:');
                
                if (!openaiApiKey || !hyperclovaApiKey) {
                    throw new Error('API ÌÇ§Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§');
                }
                
                assistant = new AIAssistantStandalone({
                    openaiApiKey: openaiApiKey,
                    hyperclovaApiKey: hyperclovaApiKey,
                    language: 'ko-KR'
                });

                // AI AssistantÏùò ÏõêÎ≥∏ processCommand Î©îÏÜåÎìúÎ•º Ï†ÄÏû•
                const originalProcessCommand = assistant.processCommand.bind(assistant);
                
                // ÏÑ±Îä• Ï∏°Ï†ïÏùÑ ÏúÑÌïú ÎûòÌçº Ìï®Ïàò
                assistant.processCommand = async function(transcript) {
                    const startTime = Date.now();
                    updateVoiceStatus('Ï≤òÎ¶¨Ï§ë...', true);
                    updateAIStrategy('üîÑ Fast-First Fallback Ïã§ÌñâÏ§ë...');
                    
                    addLog(`üé§ ÏùåÏÑ± Ïù∏Ïãù: "${transcript}"`, 'info');
                    
                    try {
                        const result = await originalProcessCommand(transcript);
                        const endTime = Date.now();
                        const responseTime = endTime - startTime;
                        
                        // ÏÑ±Îä• ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
                        performanceStats.totalCommands++;
                        performanceStats.totalResponseTime += responseTime;
                        
                        if (result && result.confidence > 0.6) {
                            performanceStats.successfulCommands++;
                            performanceStats.lastConfidence = result.confidence;
                            
                            // Î©îÎâ¥ ÏïÑÏù¥ÌÖú Ï≤òÎ¶¨
                            await handleVoiceCommand(transcript, result);
                            
                            addLog(`‚úÖ AI Ï≤òÎ¶¨ ÏÑ±Í≥µ: ${result.source} (${responseTime}ms, ${Math.round(result.confidence * 100)}% Ïã†Î¢∞ÎèÑ)`, 'success');
                            updateAIStrategy(`‚úÖ ${result.source} ÏÑ±Í≥µ (${responseTime}ms)`);
                        } else {
                            addLog(`‚ö†Ô∏è ÎÇÆÏùÄ Ïã†Î¢∞ÎèÑ: ${result ? Math.round(result.confidence * 100) : 0}%`, 'warning');
                            updateAIStrategy('‚ö†Ô∏è Ïã†Î¢∞ÎèÑ Î∂ÄÏ°±');
                        }
                        
                        updatePerformanceDisplay(responseTime, result ? result.confidence : 0);
                        updateVoiceStatus('ÏùåÏÑ± Ïù∏Ïãù ÎåÄÍ∏∞Ï§ë...', false);
                        
                        return result;
                    } catch (error) {
                        const endTime = Date.now();
                        const responseTime = endTime - startTime;
                        
                        addLog(`‚ùå AI Ï≤òÎ¶¨ Ïã§Ìå®: ${error.message}`, 'error');
                        updatePerformanceDisplay(responseTime, 0);
                        updateVoiceStatus('Ïò§Î•ò Î∞úÏÉù', false);
                        updateAIStrategy('‚ùå Ï≤òÎ¶¨ Ïã§Ìå®');
                        
                        throw error;
                    }
                };

                addLog('ü§ñ AI Assistant Ï¥àÍ∏∞Ìôî ÏôÑÎ£å', 'success');
                updateAIStrategy('‚úÖ Fast-First Fallback Ï§ÄÎπÑÏôÑÎ£å');
                
                // ÏûêÎèôÏúºÎ°ú ÏùåÏÑ± Ïù∏Ïãù ÏãúÏûë
                setTimeout(() => {
                    startVoiceRecognition();
                }, 1000);
                
            } catch (error) {
                addLog(`‚ùå Ï¥àÍ∏∞Ìôî Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        async function handleVoiceCommand(transcript, result) {
            const lowerTranscript = transcript.toLowerCase();
            
            // Î©îÎâ¥ ÏïÑÏù¥ÌÖú Îß§Ïπ≠
            const menuItems = {
                'ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏': ['ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏', 'ÏïÑÎ©î', 'Ïª§Ìîº'],
                'Ïπ¥ÌéòÎùºÎñº': ['ÎùºÎñº', 'Ïπ¥ÌéòÎùºÎñº', 'Î∞ÄÌÅ¨Ïª§Ìîº'],
                'Ïπ¥Ìë∏ÏπòÎÖ∏': ['Ïπ¥Ìë∏ÏπòÎÖ∏', 'Ïπ¥Ìë∏'],
                'Î∞îÎãêÎùºÎùºÎñº': ['Î∞îÎãêÎùº', 'Î∞îÎãêÎùºÎùºÎñº'],
                'ÏïÑÏù¥Ïä§Ìã∞': ['ÏïÑÏù¥Ïä§Ìã∞', 'Ï∞®', 'Ìã∞'],
                'Ìï´Ï¥àÏΩúÎ¶ø': ['Ï¥àÏΩúÎ¶ø', 'Ìï´Ï¥àÏΩúÎ¶ø', 'ÏΩîÏΩîÏïÑ'],
                'ÌÅ¨Î°úÏôÄÏÉÅ': ['ÌÅ¨Î°úÏôÄÏÉÅ', 'Îπµ'],
                'ÏπòÏ¶àÏºÄÏù¥ÌÅ¨': ['ÏºÄÏù¥ÌÅ¨', 'ÏπòÏ¶àÏºÄÏù¥ÌÅ¨'],
                'ÎßàÏπ¥Î°±': ['ÎßàÏπ¥Î°±', 'Ïø†ÌÇ§']
            };
            
            // Î©îÎâ¥ Îß§Ïπ≠ ÏãúÎèÑ
            for (const [itemName, keywords] of Object.entries(menuItems)) {
                if (keywords.some(keyword => lowerTranscript.includes(keyword))) {
                    toggleMenuItem(itemName);
                    addLog(`üçΩÔ∏è Î©îÎâ¥ ÏÑ†ÌÉù: ${itemName}`, 'ai');
                    break;
                }
            }
            
            // ÌäπÎ≥Ñ Î™ÖÎ†π Ï≤òÎ¶¨
            if (lowerTranscript.includes('Ï£ºÎ¨∏') || lowerTranscript.includes('Í≤∞Ï†ú')) {
                processOrder();
            } else if (lowerTranscript.includes('Ï∑®ÏÜå') || lowerTranscript.includes('Ï¥àÍ∏∞Ìôî')) {
                clearSelection();
            } else if (lowerTranscript.includes('ÎèÑÏõÄ') || lowerTranscript.includes('Ìó¨ÌîÑ')) {
                showHelp();
            }
            
            // ÌïúÍµ≠ Î¨∏Ìôî Îß•ÎùΩ Ï≤òÎ¶¨ (Îß•ÎÇ†, Ïä§Î≤Ö Îì±)
            if (lowerTranscript.includes('Îß•ÎÇ†') || lowerTranscript.includes('Îß•ÎèÑÎÇ†Îìú')) {
                addLog('üçî Îß•ÎèÑÎÇ†Îìú Í¥ÄÎ†® ÏöîÏ≤≠ - Ïô∏Î∂Ä Í≤ÄÏÉâ Ï∂îÏ≤ú', 'ai');
                updateAIStrategy('üá∞üá∑ ÌïúÍµ≠ Î¨∏Ìôî Îß•ÎùΩ Ïù∏Ïãù');
            } else if (lowerTranscript.includes('Ïä§Î≤Ö') || lowerTranscript.includes('Ïä§ÌÉÄÎ≤ÖÏä§')) {
                addLog('‚òï Ïä§ÌÉÄÎ≤ÖÏä§ Í¥ÄÎ†® ÏöîÏ≤≠ - Í≤ΩÏüÅÏóÖÏ≤¥ÏûÖÎãàÎã§!', 'warning');
                updateAIStrategy('üá∞üá∑ Í≤ΩÏüÅÏóÖÏ≤¥ Ïñ∏Í∏â Í∞êÏßÄ');
            }
        }

        function startVoiceRecognition() {
            if (assistant) {
                assistant.startListening();
                updateVoiceStatus('üé§ ÏùåÏÑ± Ïù∏Ïãù ÌôúÏÑ±Ìôî - ÎßêÏîÄÌï¥Ï£ºÏÑ∏Ïöî', true);
                addLog('üé§ ÏùåÏÑ± Ïù∏Ïãù ÏãúÏûë', 'info');
            }
        }

        function stopVoiceRecognition() {
            if (assistant) {
                assistant.stopListening();
                updateVoiceStatus('ÏùåÏÑ± Ïù∏Ïãù Ï§ëÏßÄÎê®', false);
                addLog('üõë ÏùåÏÑ± Ïù∏Ïãù Ï§ëÏßÄ', 'info');
            }
        }

        function toggleMenuItem(itemName) {
            const menuItem = document.querySelector(`[data-item="${itemName}"]`);
            if (!menuItem) return;
            
            if (selectedItems.includes(itemName)) {
                // ÏÑ†ÌÉù Ìï¥Ï†ú
                selectedItems = selectedItems.filter(item => item !== itemName);
                menuItem.classList.remove('selected');
                addLog(`‚ûñ Î©îÎâ¥ Ï†úÍ±∞: ${itemName}`, 'info');
            } else {
                // ÏÑ†ÌÉù Ï∂îÍ∞Ä
                selectedItems.push(itemName);
                menuItem.classList.add('selected');
                addLog(`‚ûï Î©îÎâ¥ Ï∂îÍ∞Ä: ${itemName}`, 'success');
            }
        }

        function processOrder() {
            if (selectedItems.length === 0) {
                addLog('‚ö†Ô∏è ÏÑ†ÌÉùÎêú Î©îÎâ¥Í∞Ä ÏóÜÏäµÎãàÎã§', 'warning');
                return;
            }
            
            addLog(`üõí Ï£ºÎ¨∏ Ï≤òÎ¶¨: ${selectedItems.join(', ')}`, 'success');
            addLog('üí≥ Í≤∞Ï†ú ÌôîÎ©¥ÏúºÎ°ú Ïù¥Îèô...', 'info');
            
            // Í∞ÑÎã®Ìïú Ï£ºÎ¨∏ ÏôÑÎ£å Ìö®Í≥º
            setTimeout(() => {
                selectedItems = [];
                document.querySelectorAll('.menu-item').forEach(item => {
                    item.classList.remove('selected');
                });
                addLog('‚úÖ Ï£ºÎ¨∏Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!', 'success');
            }, 2000);
        }

        function clearSelection() {
            selectedItems = [];
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('selected');
            });
            addLog('üóëÔ∏è ÏÑ†ÌÉù Ï¥àÍ∏∞Ìôî ÏôÑÎ£å', 'info');
        }

        function showHelp() {
            addLog('‚ùì ÎèÑÏõÄÎßê: "ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏", "ÎùºÎñº 2Í∞ú", "Ï£ºÎ¨∏ÌïòÍ∏∞" Îì±ÏúºÎ°ú ÎßêÏîÄÌï¥Ï£ºÏÑ∏Ïöî', 'info');
            addLog('üí° ÌïúÍµ≠Ïñ¥ ÌëúÌòÑ: "Îß•ÎÇ†", "Ïä§Î≤Ö" Í∞ôÏùÄ Ï∂ïÏïΩÏñ¥ÎèÑ Ïù∏ÏãùÌï©ÎãàÎã§', 'info');
        }

        function cancelOrder() {
            clearSelection();
            addLog('‚ùå Ï£ºÎ¨∏Ïù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§', 'warning');
        }

        // ÏÑ±Îä• ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updatePerformanceDisplay(responseTime, confidence) {
            document.getElementById('responseTime').textContent = `${responseTime}ms`;
            document.getElementById('confidence').textContent = `${Math.round(confidence * 100)}%`;
            
            const successRate = performanceStats.totalCommands > 0 
                ? Math.round((performanceStats.successfulCommands / performanceStats.totalCommands) * 100)
                : 0;
            document.getElementById('successRate').textContent = `${successRate}%`;
            document.getElementById('totalCommands').textContent = performanceStats.totalCommands;
        }

        function updateVoiceStatus(text, isListening) {
            const micIndicator = document.getElementById('micIndicator');
            const statusText = document.getElementById('voiceStatusText');
            
            statusText.textContent = text;
            
            if (isListening) {
                micIndicator.classList.add('listening');
            } else {
                micIndicator.classList.remove('listening');
            }
        }

        function updateAIStrategy(text) {
            document.getElementById('aiStrategy').textContent = text;
        }

        // Î°úÍ∑∏ Í¥ÄÎ†® Ìï®ÏàòÎì§
        function addLog(message, type = 'info') {
            const logContent = document.getElementById('logContent');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            
            logContent.appendChild(logEntry);
            logContent.scrollTop = logContent.scrollHeight;
            
            // Î°úÍ∑∏Í∞Ä ÎÑàÎ¨¥ ÎßéÏïÑÏßÄÎ©¥ Ïò§ÎûòÎêú Í≤É Ï†úÍ±∞
            if (logContent.children.length > 100) {
                logContent.removeChild(logContent.firstChild);
            }
        }

        function clearLogs() {
            document.getElementById('logContent').innerHTML = '';
            addLog('üìù Î°úÍ∑∏Í∞Ä ÏßÄÏõåÏ°åÏäµÎãàÎã§', 'info');
        }

        function exportLogs() {
            const logs = Array.from(document.querySelectorAll('.log-entry'))
                .map(entry => entry.textContent)
                .join('\n');
            
            const blob = new Blob([logs], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `kiosk-logs-${new Date().toISOString().slice(0, 10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            addLog('üíæ Î°úÍ∑∏Í∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§', 'success');
        }

        // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case ' ':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        startVoiceRecognition();
                    }
                    break;
                case 'Escape':
                    stopVoiceRecognition();
                    break;
                case 'Enter':
                    if (e.ctrlKey) {
                        processOrder();
                    }
                    break;
                case 'Delete':
                    if (e.ctrlKey) {
                        clearSelection();
                    }
                    break;
            }
        });
    </script>
</body>
</html>